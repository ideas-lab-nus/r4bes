<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Manipulating Data | R for Building Energy Simulation</title>
  <meta name="description" content="A guide to the building energy simulation with R." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Manipulating Data | R for Building Energy Simulation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A guide to the building energy simulation with R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Manipulating Data | R for Building Energy Simulation" />
  
  <meta name="twitter:description" content="A guide to the building energy simulation with R." />
  

<meta name="author" content="Adrian Chong" />


<meta name="date" content="2021-07-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="functions.html"/>
<link rel="next" href="get-started.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for BES</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-this-book"><i class="fa fa-check"></i>Structure of this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-and-rstudio"><i class="fa fa-check"></i>R and RStudio</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-packages"><i class="fa fa-check"></i>R Packages</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#energyplus"><i class="fa fa-check"></i>EnergyPlus</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions"><i class="fa fa-check"></i>Conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#before-you-begin"><i class="fa fa-check"></i>Before you begin</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#r-project"><i class="fa fa-check"></i>R Project</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#scripting"><i class="fa fa-check"></i>Scripting</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#example-files"><i class="fa fa-check"></i>Example files</a></li>
<li class="chapter" data-level="0.0.1" data-path="index.html"><a href="index.html#project-structure"><i class="fa fa-check"></i><b>0.0.1</b> Project structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#style-guide"><i class="fa fa-check"></i>Style guide</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I R Basics</b></span></li>
<li class="chapter" data-level="1" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#prerequisites-1"><i class="fa fa-check"></i><b>2.1</b> Prerequisites</a></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#basic-operators"><i class="fa fa-check"></i><b>2.2</b> Basic operators</a></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#basic-data-types"><i class="fa fa-check"></i><b>2.3</b> Basic data types</a></li>
<li class="chapter" data-level="2.4" data-path="basics.html"><a href="basics.html#basic-data-structures"><i class="fa fa-check"></i><b>2.4</b> Basic data structures</a></li>
<li class="chapter" data-level="2.5" data-path="basics.html"><a href="basics.html#tibbles"><i class="fa fa-check"></i><b>2.5</b> Tibbles</a></li>
<li class="chapter" data-level="2.6" data-path="basics.html"><a href="basics.html#data-table"><i class="fa fa-check"></i><b>2.6</b> data.table</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>3</b> Dates and Times</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dates-and-times.html"><a href="dates-and-times.html#prerequisites-2"><i class="fa fa-check"></i><b>3.1</b> Prerequisites</a></li>
<li class="chapter" data-level="3.2" data-path="dates-and-times.html"><a href="dates-and-times.html#parsing-dates-and-times"><i class="fa fa-check"></i><b>3.2</b> Parsing dates and times</a></li>
<li class="chapter" data-level="3.3" data-path="dates-and-times.html"><a href="dates-and-times.html#extracting-components"><i class="fa fa-check"></i><b>3.3</b> Extracting components</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>4</b> Importing Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="importing-data.html"><a href="importing-data.html#prerequisites-3"><i class="fa fa-check"></i><b>4.1</b> Prerequisites</a></li>
<li class="chapter" data-level="4.2" data-path="importing-data.html"><a href="importing-data.html#finding-your-file"><i class="fa fa-check"></i><b>4.2</b> Finding your file</a></li>
<li class="chapter" data-level="4.3" data-path="importing-data.html"><a href="importing-data.html#parsing-a-csv-file"><i class="fa fa-check"></i><b>4.3</b> Parsing a csv file</a></li>
<li class="chapter" data-level="4.4" data-path="importing-data.html"><a href="importing-data.html#building-data"><i class="fa fa-check"></i><b>4.4</b> Building data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importing-data-1.html"><a href="importing-data-1.html"><i class="fa fa-check"></i><b>5</b> Importing Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="importing-data-1.html"><a href="importing-data-1.html#prerequisites-4"><i class="fa fa-check"></i><b>5.1</b> Prerequisites</a></li>
<li class="chapter" data-level="5.2" data-path="importing-data-1.html"><a href="importing-data-1.html#finding-your-file-1"><i class="fa fa-check"></i><b>5.2</b> Finding your file</a></li>
<li class="chapter" data-level="5.3" data-path="importing-data-1.html"><a href="importing-data-1.html#parsing-a-csv-file-1"><i class="fa fa-check"></i><b>5.3</b> Parsing a csv file</a></li>
<li class="chapter" data-level="5.4" data-path="importing-data-1.html"><a href="importing-data-1.html#building-data-1"><i class="fa fa-check"></i><b>5.4</b> Building data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regular-expressions.html"><a href="regular-expressions.html"><i class="fa fa-check"></i><b>6</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="regular-expressions.html"><a href="regular-expressions.html#prerequisites-5"><i class="fa fa-check"></i><b>6.1</b> Prerequisites</a></li>
<li class="chapter" data-level="6.2" data-path="regular-expressions.html"><a href="regular-expressions.html#basic-matches"><i class="fa fa-check"></i><b>6.2</b> Basic matches</a></li>
<li class="chapter" data-level="6.3" data-path="regular-expressions.html"><a href="regular-expressions.html#character-classes"><i class="fa fa-check"></i><b>6.3</b> Character classes</a></li>
<li class="chapter" data-level="6.4" data-path="regular-expressions.html"><a href="regular-expressions.html#regex-escape"><i class="fa fa-check"></i><b>6.4</b> Escaping</a></li>
<li class="chapter" data-level="6.5" data-path="regular-expressions.html"><a href="regular-expressions.html#anchors"><i class="fa fa-check"></i><b>6.5</b> Anchors</a></li>
<li class="chapter" data-level="6.6" data-path="regular-expressions.html"><a href="regular-expressions.html#quantifies"><i class="fa fa-check"></i><b>6.6</b> Quantifies</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>7</b> Functions</a>
<ul>
<li class="chapter" data-level="7.1" data-path="functions.html"><a href="functions.html#prerequisites-6"><i class="fa fa-check"></i><b>7.1</b> Prerequisites</a></li>
<li class="chapter" data-level="7.2" data-path="functions.html"><a href="functions.html#user-defined-function"><i class="fa fa-check"></i><b>7.2</b> User-defined function</a></li>
<li class="chapter" data-level="7.3" data-path="functions.html"><a href="functions.html#examples"><i class="fa fa-check"></i><b>7.3</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="manipulate.html"><a href="manipulate.html"><i class="fa fa-check"></i><b>8</b> Manipulating Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="manipulate.html"><a href="manipulate.html#prerequisites-7"><i class="fa fa-check"></i><b>8.1</b> Prerequisites</a></li>
<li class="chapter" data-level="8.2" data-path="manipulate.html"><a href="manipulate.html#data-transformation"><i class="fa fa-check"></i><b>8.2</b> Data transformation</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="manipulate.html"><a href="manipulate.html#select"><i class="fa fa-check"></i><b>8.2.1</b> <code>select()</code></a></li>
<li class="chapter" data-level="8.2.2" data-path="manipulate.html"><a href="manipulate.html#filter"><i class="fa fa-check"></i><b>8.2.2</b> <code>filter()</code></a></li>
<li class="chapter" data-level="8.2.3" data-path="manipulate.html"><a href="manipulate.html#arrange"><i class="fa fa-check"></i><b>8.2.3</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="8.2.4" data-path="manipulate.html"><a href="manipulate.html#mutate"><i class="fa fa-check"></i><b>8.2.4</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="8.2.5" data-path="manipulate.html"><a href="manipulate.html#summarise-and-group_by"><i class="fa fa-check"></i><b>8.2.5</b> <code>summarise()</code> and <code>group_by()</code></a></li>
<li class="chapter" data-level="8.2.6" data-path="manipulate.html"><a href="manipulate.html#across"><i class="fa fa-check"></i><b>8.2.6</b> <code>across()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="manipulate.html"><a href="manipulate.html#pipes"><i class="fa fa-check"></i><b>8.3</b> Pipes</a></li>
</ul></li>
<li class="part"><span><b>II Get Started</b></span></li>
<li class="chapter" data-level="9" data-path="get-started.html"><a href="get-started.html"><i class="fa fa-check"></i><b>9</b> Introduction</a></li>
<li class="chapter" data-level="10" data-path="parse.html"><a href="parse.html"><i class="fa fa-check"></i><b>10</b> Parse then simulate</a>
<ul>
<li class="chapter" data-level="10.1" data-path="parse.html"><a href="parse.html#prerequisites-8"><i class="fa fa-check"></i><b>10.1</b> Prerequisites</a></li>
<li class="chapter" data-level="10.2" data-path="parse.html"><a href="parse.html#key-energyplus-files"><i class="fa fa-check"></i><b>10.2</b> Key EnergyPlus files</a></li>
<li class="chapter" data-level="10.3" data-path="parse.html"><a href="parse.html#parsing-the-model"><i class="fa fa-check"></i><b>10.3</b> Parsing the model</a></li>
<li class="chapter" data-level="10.4" data-path="parse.html"><a href="parse.html#simulating-the-model"><i class="fa fa-check"></i><b>10.4</b> Simulating the model</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>11</b> Summary reports</a>
<ul>
<li class="chapter" data-level="11.1" data-path="summary.html"><a href="summary.html#prerequisites-9"><i class="fa fa-check"></i><b>11.1</b> Prerequisites</a></li>
<li class="chapter" data-level="11.2" data-path="summary.html"><a href="summary.html#output-summary-reports"><i class="fa fa-check"></i><b>11.2</b> Output summary reports</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualize.html"><a href="visualize.html"><i class="fa fa-check"></i><b>12</b> Visualize</a>
<ul>
<li class="chapter" data-level="12.1" data-path="visualize.html"><a href="visualize.html#prerequisites-10"><i class="fa fa-check"></i><b>12.1</b> Prerequisites</a></li>
<li class="chapter" data-level="12.2" data-path="visualize.html"><a href="visualize.html#colors"><i class="fa fa-check"></i><b>12.2</b> Colors</a></li>
<li class="chapter" data-level="12.3" data-path="visualize.html"><a href="visualize.html#ggplot"><i class="fa fa-check"></i><b>12.3</b> <code>ggplot()</code></a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="visualize.html"><a href="visualize.html#functions-and-components"><i class="fa fa-check"></i><b>12.3.1</b> Functions and Components</a></li>
<li class="chapter" data-level="12.3.2" data-path="visualize.html"><a href="visualize.html#a-simple-example"><i class="fa fa-check"></i><b>12.3.2</b> A simple example</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Inputs and Outputs</b></span></li>
<li class="chapter" data-level="13" data-path="input-output.html"><a href="input-output.html"><i class="fa fa-check"></i><b>13</b> Introduction</a></li>
<li class="chapter" data-level="14" data-path="input.html"><a href="input.html"><i class="fa fa-check"></i><b>14</b> Model Input Structure</a>
<ul>
<li class="chapter" data-level="14.1" data-path="input.html"><a href="input.html#prerequisites-11"><i class="fa fa-check"></i><b>14.1</b> Prerequisites</a></li>
<li class="chapter" data-level="14.2" data-path="input.html"><a href="input.html#energyplus-documentation"><i class="fa fa-check"></i><b>14.2</b> EnergyPlus Documentation</a></li>
<li class="chapter" data-level="14.3" data-path="input.html"><a href="input.html#energyplus-input-structure"><i class="fa fa-check"></i><b>14.3</b> EnergyPlus input structure</a></li>
<li class="chapter" data-level="14.4" data-path="input.html"><a href="input.html#class-vs-object"><i class="fa fa-check"></i><b>14.4</b> Class vs Object</a></li>
<li class="chapter" data-level="14.5" data-path="input.html"><a href="input.html#model-query"><i class="fa fa-check"></i><b>14.5</b> Model Query</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="input.html"><a href="input.html#idf-class-methods"><i class="fa fa-check"></i><b>14.5.1</b> <code>Idf</code> class methods</a></li>
<li class="chapter" data-level="14.5.2" data-path="input.html"><a href="input.html#operator"><i class="fa fa-check"></i><b>14.5.2</b> <code>$</code> operator</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="input.html"><a href="input.html#object-interdependencies"><i class="fa fa-check"></i><b>14.6</b> Object interdependencies</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="modify.html"><a href="modify.html"><i class="fa fa-check"></i><b>15</b> Modify model inputs</a>
<ul>
<li class="chapter" data-level="15.1" data-path="modify.html"><a href="modify.html#prerequisites-12"><i class="fa fa-check"></i><b>15.1</b> Prerequisites</a></li>
<li class="chapter" data-level="15.2" data-path="modify.html"><a href="modify.html#extract-and-modify"><i class="fa fa-check"></i><b>15.2</b> Extract and Modify</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="modify.html"><a href="modify.html#single-object"><i class="fa fa-check"></i><b>15.2.1</b> Single object</a></li>
<li class="chapter" data-level="15.2.2" data-path="modify.html"><a href="modify.html#multiple-objects"><i class="fa fa-check"></i><b>15.2.2</b> Multiple objects</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="modify.html"><a href="modify.html#create-new-objects"><i class="fa fa-check"></i><b>15.3</b> Create new objects</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="modify.html"><a href="modify.html#add"><i class="fa fa-check"></i><b>15.3.1</b> add</a></li>
<li class="chapter" data-level="15.3.2" data-path="modify.html"><a href="modify.html#duplicate"><i class="fa fa-check"></i><b>15.3.2</b> duplicate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="output.html"><a href="output.html"><i class="fa fa-check"></i><b>16</b> Detailed output</a>
<ul>
<li class="chapter" data-level="16.1" data-path="output.html"><a href="output.html#prerequisites-13"><i class="fa fa-check"></i><b>16.1</b> Prerequisites</a></li>
<li class="chapter" data-level="16.2" data-path="output.html"><a href="output.html#meters"><i class="fa fa-check"></i><b>16.2</b> Meters</a></li>
<li class="chapter" data-level="16.3" data-path="output.html"><a href="output.html#variables"><i class="fa fa-check"></i><b>16.3</b> Variables</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="explore.html"><a href="explore.html"><i class="fa fa-check"></i><b>17</b> Model Exploration</a>
<ul>
<li class="chapter" data-level="17.1" data-path="explore.html"><a href="explore.html#prerequisites-14"><i class="fa fa-check"></i><b>17.1</b> Prerequisites</a></li>
</ul></li>
<li class="part"><span><b>IV Program</b></span></li>
<li class="chapter" data-level="18" data-path="program.html"><a href="program.html"><i class="fa fa-check"></i><b>18</b> Introduction</a></li>
<li class="chapter" data-level="19" data-path="energy-efficient-measures.html"><a href="energy-efficient-measures.html"><i class="fa fa-check"></i><b>19</b> Energy Efficient Measures</a></li>
<li class="chapter" data-level="20" data-path="parametric-simulations.html"><a href="parametric-simulations.html"><i class="fa fa-check"></i><b>20</b> Parametric simulations</a></li>
<li class="part"><span><b>V Advanced</b></span></li>
<li class="chapter" data-level="21" data-path="advanced.html"><a href="advanced.html"><i class="fa fa-check"></i><b>21</b> Introduction</a></li>
<li class="chapter" data-level="22" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>22</b> Sensitivity analysis</a></li>
<li class="chapter" data-level="23" data-path="optimization.html"><a href="optimization.html"><i class="fa fa-check"></i><b>23</b> Optimization</a></li>
<li class="chapter" data-level="24" data-path="calibration.html"><a href="calibration.html"><i class="fa fa-check"></i><b>24</b> Calibration</a></li>
<li class="part"><span><b>VI Reproduce</b></span></li>
<li class="chapter" data-level="25" data-path="reproduce.html"><a href="reproduce.html"><i class="fa fa-check"></i><b>25</b> Introduction</a></li>
<li class="chapter" data-level="26" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>26</b> R Markdown</a></li>
<li class="chapter" data-level="27" data-path="containers.html"><a href="containers.html"><i class="fa fa-check"></i><b>27</b> Containers</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Building Energy Simulation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipulate" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> Manipulating Data</h1>
<p>Data-preprocessing is an important step in any data science process. Rarely will you receive data that is in the exact form that you need. More often than not, you would need to pre-process the data by transforming and manipulating them so that they are easier to work with. This will be the focus in this chapter.</p>
<div id="prerequisites-7" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Prerequisites</h2>
<p>In this chapter we focus on the use of the <strong>dplyr</strong> package that forms a core part of the <strong>tidyverse</strong> package. <strong>dplyr</strong> provides function that alleviates the challenges of data manipulation.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="manipulate.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb76-2"><a href="manipulate.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb76-3"><a href="manipulate.html#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
<p>To explore the basic data manipulation capabilities of dplyr package, we will use the <code>building_meter</code> dataset. If the following code returns <code>FALSE</code>, you should refer to the section <a href="importing-data-1.html#finding-your-file-1">Finding your file</a> in the <a href="index.html#preface">Preface</a> on where you can download the datasets.</p>
<p>that can be downloaded from XXX. This dataset contains 8,760 time-series observations of typical building meter measurements that is simulated using the Department of Energy’s (DOE) reference building energy model for medium sized offices <span class="citation">[<a href="#ref-deru_us_2011" role="doc-biblioref">3</a>]</span>.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="manipulate.html#cb77-1" aria-hidden="true" tabindex="-1"></a>bldg <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;building_meter.csv&quot;</span>))</span>
<span id="cb77-2"><a href="manipulate.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb77-3"><a href="manipulate.html#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="do">## ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb77-4"><a href="manipulate.html#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="do">## cols(</span></span>
<span id="cb77-5"><a href="manipulate.html#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   `Date/Time` = col_datetime(format = &quot;&quot;),</span></span>
<span id="cb77-6"><a href="manipulate.html#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   `Cooling:Electricity [J](Hourly)` = col_double(),</span></span>
<span id="cb77-7"><a href="manipulate.html#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   `Heating:NaturalGas [J](Hourly)` = col_double(),</span></span>
<span id="cb77-8"><a href="manipulate.html#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   `Heating:Electricity [J](Hourly)` = col_double(),</span></span>
<span id="cb77-9"><a href="manipulate.html#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   `InteriorLights:Electricity [J](Hourly)` = col_double(),</span></span>
<span id="cb77-10"><a href="manipulate.html#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="do">##   `ExteriorLights:Electricity [J](Hourly)` = col_double(),</span></span>
<span id="cb77-11"><a href="manipulate.html#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   `InteriorEquipment:Electricity [J](Hourly)` = col_double(),</span></span>
<span id="cb77-12"><a href="manipulate.html#cb77-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   `Fans:Electricity [J](Hourly)` = col_double(),</span></span>
<span id="cb77-13"><a href="manipulate.html#cb77-13" aria-hidden="true" tabindex="-1"></a><span class="do">##   `Pumps:Electricity [J](Hourly)` = col_double(),</span></span>
<span id="cb77-14"><a href="manipulate.html#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="do">##   `WaterSystems:NaturalGas [J](Hourly)` = col_double()</span></span>
<span id="cb77-15"><a href="manipulate.html#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="do">## )</span></span>
<span id="cb77-16"><a href="manipulate.html#cb77-16" aria-hidden="true" tabindex="-1"></a>bldg</span>
<span id="cb77-17"><a href="manipulate.html#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 10</span></span>
<span id="cb77-18"><a href="manipulate.html#cb77-18" aria-hidden="true" tabindex="-1"></a><span class="do">##    `Date/Time`         `Cooling:Electrici… `Heating:NaturalG… `Heating:Electric…</span></span>
<span id="cb77-19"><a href="manipulate.html#cb77-19" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb77-20"><a href="manipulate.html#cb77-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                   0          13517796.         182286476.</span></span>
<span id="cb77-21"><a href="manipulate.html#cb77-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                   0          17717617.         177367416.</span></span>
<span id="cb77-22"><a href="manipulate.html#cb77-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                   0          25310615.         235785509 </span></span>
<span id="cb77-23"><a href="manipulate.html#cb77-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                   0          20001989.         184762495.</span></span>
<span id="cb77-24"><a href="manipulate.html#cb77-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                   0          27925599.         245249657.</span></span>
<span id="cb77-25"><a href="manipulate.html#cb77-25" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                   0          21886933.         190670331.</span></span>
<span id="cb77-26"><a href="manipulate.html#cb77-26" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                   0          29745424.         252272477.</span></span>
<span id="cb77-27"><a href="manipulate.html#cb77-27" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>Spaces make it difficult to</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="manipulate.html#cb78-1" aria-hidden="true" tabindex="-1"></a>new_name <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(<span class="fu">names</span>(bldg), <span class="st">&quot;</span><span class="sc">\\</span><span class="st">W</span><span class="sc">\\</span><span class="st">W?&quot;</span>, <span class="st">&quot;_&quot;</span>)</span>
<span id="cb78-2"><a href="manipulate.html#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(bldg) <span class="ot">&lt;-</span> <span class="fu">str_remove_all</span>(new_name, <span class="st">&quot;_Hourly_&quot;</span>)</span></code></pre></div>
</div>
<div id="data-transformation" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Data transformation</h2>
<p>The <a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf">cheat sheet for dplyr</a> provides a good summary of data transformation functions covered in this chapter.</p>
<ul>
<li><code>select()</code>: To select columns based on their names.</li>
<li><code>filter()</code>: To subset rows based on their values.</li>
<li><code>mutate()</code>: To add new variables whose values are a function of existing variables.</li>
<li><code>arrange()</code>: To sort the dataset based on the values of selected columns</li>
<li><code>summarise()</code>:</li>
<li><code>join.R</code>: generic functions that joins two tables together</li>
</ul>
<div id="select" class="section level3" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> <code>select()</code></h3>
<p>You can use the function <code>select()</code> to choose the variables to retain in the dataset based on their names. It is not uncommon to get datasets with hundred or thousands of variables. An example is when working with data from the building management system. Under these scenarios, it is often very useful to narrow down the dataset to contain only the variables of interest. <code>select()</code> allows you to do this very easily, to zoom in on the variables or columns of interest.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="manipulate.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg, Date_Time, Cooling_Electricity_J, Heating_Electricity_J)</span>
<span id="cb79-2"><a href="manipulate.html#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 3</span></span>
<span id="cb79-3"><a href="manipulate.html#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricity_J Heating_Electricity_J</span></span>
<span id="cb79-4"><a href="manipulate.html#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                              &lt;dbl&gt;                 &lt;dbl&gt;</span></span>
<span id="cb79-5"><a href="manipulate.html#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                     0            182286476.</span></span>
<span id="cb79-6"><a href="manipulate.html#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                     0            177367416.</span></span>
<span id="cb79-7"><a href="manipulate.html#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                     0            235785509 </span></span>
<span id="cb79-8"><a href="manipulate.html#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                     0            184762495.</span></span>
<span id="cb79-9"><a href="manipulate.html#cb79-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                     0            245249657.</span></span>
<span id="cb79-10"><a href="manipulate.html#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                     0            190670331.</span></span>
<span id="cb79-11"><a href="manipulate.html#cb79-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                     0            252272477.</span></span>
<span id="cb79-12"><a href="manipulate.html#cb79-12" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>You can also optionally rename columns with the <code>select()</code> function.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="manipulate.html#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg,</span>
<span id="cb80-2"><a href="manipulate.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">datetime =</span> Date_Time,</span>
<span id="cb80-3"><a href="manipulate.html#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">cooling =</span> Cooling_Electricity_J,</span>
<span id="cb80-4"><a href="manipulate.html#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">heating =</span> Heating_Electricity_J</span>
<span id="cb80-5"><a href="manipulate.html#cb80-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-6"><a href="manipulate.html#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 3</span></span>
<span id="cb80-7"><a href="manipulate.html#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    datetime            cooling    heating</span></span>
<span id="cb80-8"><a href="manipulate.html#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb80-9"><a href="manipulate.html#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00       0 182286476.</span></span>
<span id="cb80-10"><a href="manipulate.html#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00       0 177367416.</span></span>
<span id="cb80-11"><a href="manipulate.html#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00       0 235785509 </span></span>
<span id="cb80-12"><a href="manipulate.html#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00       0 184762495.</span></span>
<span id="cb80-13"><a href="manipulate.html#cb80-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00       0 245249657.</span></span>
<span id="cb80-14"><a href="manipulate.html#cb80-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00       0 190670331.</span></span>
<span id="cb80-15"><a href="manipulate.html#cb80-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00       0 252272477.</span></span>
<span id="cb80-16"><a href="manipulate.html#cb80-16" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>Additionally, tidyverse provides helper functions that lets you select columns by matching patterns in their names. For the following selection helper functions, a character vector is provided for the match. If <code>length()</code> of the character vector is larger than 1, the logical union (OR <code>|</code> operator) is taken.</p>
<ul>
<li><code>starts_with()</code>: Select columns that starts with a specific character vector</li>
</ul>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="manipulate.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg, <span class="fu">starts_with</span>(<span class="fu">c</span>(<span class="st">&quot;Heating&quot;</span>, <span class="st">&quot;Cooling&quot;</span>)))</span>
<span id="cb81-2"><a href="manipulate.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 3</span></span>
<span id="cb81-3"><a href="manipulate.html#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Heating_NaturalGas_J Heating_Electricity_J Cooling_Electricity_J</span></span>
<span id="cb81-4"><a href="manipulate.html#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="do">##                   &lt;dbl&gt;                 &lt;dbl&gt;                 &lt;dbl&gt;</span></span>
<span id="cb81-5"><a href="manipulate.html#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1            13517796.            182286476.                     0</span></span>
<span id="cb81-6"><a href="manipulate.html#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2            17717617.            177367416.                     0</span></span>
<span id="cb81-7"><a href="manipulate.html#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3            25310615.            235785509                      0</span></span>
<span id="cb81-8"><a href="manipulate.html#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4            20001989.            184762495.                     0</span></span>
<span id="cb81-9"><a href="manipulate.html#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5            27925599.            245249657.                     0</span></span>
<span id="cb81-10"><a href="manipulate.html#cb81-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6            21886933.            190670331.                     0</span></span>
<span id="cb81-11"><a href="manipulate.html#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7            29745424.            252272477.                     0</span></span>
<span id="cb81-12"><a href="manipulate.html#cb81-12" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<ul>
<li><code>ends_with()</code>: Select columns that ends with a specific character vector</li>
</ul>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="manipulate.html#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg, <span class="fu">ends_with</span>(<span class="st">&quot;Time&quot;</span>))</span>
<span id="cb82-2"><a href="manipulate.html#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 1</span></span>
<span id="cb82-3"><a href="manipulate.html#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time          </span></span>
<span id="cb82-4"><a href="manipulate.html#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;             </span></span>
<span id="cb82-5"><a href="manipulate.html#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00</span></span>
<span id="cb82-6"><a href="manipulate.html#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00</span></span>
<span id="cb82-7"><a href="manipulate.html#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00</span></span>
<span id="cb82-8"><a href="manipulate.html#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00</span></span>
<span id="cb82-9"><a href="manipulate.html#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00</span></span>
<span id="cb82-10"><a href="manipulate.html#cb82-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00</span></span>
<span id="cb82-11"><a href="manipulate.html#cb82-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00</span></span>
<span id="cb82-12"><a href="manipulate.html#cb82-12" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<ul>
<li><code>contains()</code>: Select columns that contains a specific character vector</li>
</ul>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="manipulate.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(</span>
<span id="cb83-2"><a href="manipulate.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  bldg,</span>
<span id="cb83-3"><a href="manipulate.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">contains</span>(</span>
<span id="cb83-4"><a href="manipulate.html#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(</span>
<span id="cb83-5"><a href="manipulate.html#cb83-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Time&quot;</span>,</span>
<span id="cb83-6"><a href="manipulate.html#cb83-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;electricity&quot;</span></span>
<span id="cb83-7"><a href="manipulate.html#cb83-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb83-8"><a href="manipulate.html#cb83-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb83-9"><a href="manipulate.html#cb83-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb83-10"><a href="manipulate.html#cb83-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 8</span></span>
<span id="cb83-11"><a href="manipulate.html#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electrici… Heating_Electrici… InteriorLights_Ele…</span></span>
<span id="cb83-12"><a href="manipulate.html#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                           &lt;dbl&gt;              &lt;dbl&gt;               &lt;dbl&gt;</span></span>
<span id="cb83-13"><a href="manipulate.html#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                  0         182286476.            9649498.</span></span>
<span id="cb83-14"><a href="manipulate.html#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                  0         177367416.            9649498.</span></span>
<span id="cb83-15"><a href="manipulate.html#cb83-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                  0         235785509             9649498.</span></span>
<span id="cb83-16"><a href="manipulate.html#cb83-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                  0         184762495.            9649498.</span></span>
<span id="cb83-17"><a href="manipulate.html#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                  0         245249657.            9649498.</span></span>
<span id="cb83-18"><a href="manipulate.html#cb83-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                  0         190670331.            9649498.</span></span>
<span id="cb83-19"><a href="manipulate.html#cb83-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                  0         252272477.            9649498.</span></span>
<span id="cb83-20"><a href="manipulate.html#cb83-20" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<ul>
<li><code>matches()</code>: Select columns that matches a regular expression. <code>rename()</code> is a dplyr function that allows you to change the names of individual columns using <code>new_name</code> = <code>old_name</code>.</li>
</ul>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="manipulate.html#cb84-1" aria-hidden="true" tabindex="-1"></a>reg_ex <span class="ot">&lt;-</span> <span class="st">&quot;[dD]ate.?[tT]ime&quot;</span></span>
<span id="cb84-2"><a href="manipulate.html#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="manipulate.html#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg, <span class="fu">matches</span>(reg_ex, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span>
<span id="cb84-4"><a href="manipulate.html#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 1</span></span>
<span id="cb84-5"><a href="manipulate.html#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time          </span></span>
<span id="cb84-6"><a href="manipulate.html#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;             </span></span>
<span id="cb84-7"><a href="manipulate.html#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00</span></span>
<span id="cb84-8"><a href="manipulate.html#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00</span></span>
<span id="cb84-9"><a href="manipulate.html#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00</span></span>
<span id="cb84-10"><a href="manipulate.html#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00</span></span>
<span id="cb84-11"><a href="manipulate.html#cb84-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00</span></span>
<span id="cb84-12"><a href="manipulate.html#cb84-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00</span></span>
<span id="cb84-13"><a href="manipulate.html#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00</span></span>
<span id="cb84-14"><a href="manipulate.html#cb84-14" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb84-15"><a href="manipulate.html#cb84-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-16"><a href="manipulate.html#cb84-16" aria-hidden="true" tabindex="-1"></a>bldg_rename_a <span class="ot">&lt;-</span> <span class="fu">rename</span>(bldg, <span class="st">`</span><span class="at">Date/Time</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Date_Time</span><span class="st">`</span>)</span>
<span id="cb84-17"><a href="manipulate.html#cb84-17" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg_rename_a, <span class="fu">matches</span>(reg_ex, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span>
<span id="cb84-18"><a href="manipulate.html#cb84-18" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 1</span></span>
<span id="cb84-19"><a href="manipulate.html#cb84-19" aria-hidden="true" tabindex="-1"></a><span class="do">##    `Date/Time`        </span></span>
<span id="cb84-20"><a href="manipulate.html#cb84-20" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;             </span></span>
<span id="cb84-21"><a href="manipulate.html#cb84-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00</span></span>
<span id="cb84-22"><a href="manipulate.html#cb84-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00</span></span>
<span id="cb84-23"><a href="manipulate.html#cb84-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00</span></span>
<span id="cb84-24"><a href="manipulate.html#cb84-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00</span></span>
<span id="cb84-25"><a href="manipulate.html#cb84-25" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00</span></span>
<span id="cb84-26"><a href="manipulate.html#cb84-26" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00</span></span>
<span id="cb84-27"><a href="manipulate.html#cb84-27" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00</span></span>
<span id="cb84-28"><a href="manipulate.html#cb84-28" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb84-29"><a href="manipulate.html#cb84-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-30"><a href="manipulate.html#cb84-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-31"><a href="manipulate.html#cb84-31" aria-hidden="true" tabindex="-1"></a>bldg_rename_b <span class="ot">&lt;-</span> <span class="fu">rename</span>(bldg, <span class="st">`</span><span class="at">datetime</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Date_Time</span><span class="st">`</span>)</span>
<span id="cb84-32"><a href="manipulate.html#cb84-32" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg_rename_b, <span class="fu">matches</span>(reg_ex, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span>
<span id="cb84-33"><a href="manipulate.html#cb84-33" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 1</span></span>
<span id="cb84-34"><a href="manipulate.html#cb84-34" aria-hidden="true" tabindex="-1"></a><span class="do">##    datetime           </span></span>
<span id="cb84-35"><a href="manipulate.html#cb84-35" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;             </span></span>
<span id="cb84-36"><a href="manipulate.html#cb84-36" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00</span></span>
<span id="cb84-37"><a href="manipulate.html#cb84-37" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00</span></span>
<span id="cb84-38"><a href="manipulate.html#cb84-38" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00</span></span>
<span id="cb84-39"><a href="manipulate.html#cb84-39" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00</span></span>
<span id="cb84-40"><a href="manipulate.html#cb84-40" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00</span></span>
<span id="cb84-41"><a href="manipulate.html#cb84-41" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00</span></span>
<span id="cb84-42"><a href="manipulate.html#cb84-42" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00</span></span>
<span id="cb84-43"><a href="manipulate.html#cb84-43" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<ul>
<li><code>all_of()</code> and <code>any_of()</code>: You can also select variables from a character vector using the selection helper functions <code>all_of()</code> and <code>any_of()</code>. The key difference is that <code>all_of()</code> is used for strict selection where an error is thrown for variable names that do not exist. In contrast, <code>any_of()</code> does not check for missing variable names, and thus is often used to ensure a specific column is removed.</li>
</ul>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="manipulate.html#cb85-1" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Heating_NaturalGas_J&quot;</span>, <span class="st">&quot;WaterSystems_NaturalGas_J&quot;</span>)</span>
<span id="cb85-2"><a href="manipulate.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg, <span class="fu">all_of</span>(vars))</span>
<span id="cb85-3"><a href="manipulate.html#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 2</span></span>
<span id="cb85-4"><a href="manipulate.html#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    Heating_NaturalGas_J WaterSystems_NaturalGas_J</span></span>
<span id="cb85-5"><a href="manipulate.html#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="do">##                   &lt;dbl&gt;                     &lt;dbl&gt;</span></span>
<span id="cb85-6"><a href="manipulate.html#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1            13517796.                    72000 </span></span>
<span id="cb85-7"><a href="manipulate.html#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2            17717617.                    72000 </span></span>
<span id="cb85-8"><a href="manipulate.html#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3            25310615.                  3970732.</span></span>
<span id="cb85-9"><a href="manipulate.html#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4            20001989.                    72000 </span></span>
<span id="cb85-10"><a href="manipulate.html#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5            27925599.                  3970995.</span></span>
<span id="cb85-11"><a href="manipulate.html#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6            21886933.                    72000 </span></span>
<span id="cb85-12"><a href="manipulate.html#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7            29745424.                  3970782.</span></span>
<span id="cb85-13"><a href="manipulate.html#cb85-13" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb85-14"><a href="manipulate.html#cb85-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-15"><a href="manipulate.html#cb85-15" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg, <span class="sc">-</span><span class="fu">any_of</span>(vars))</span>
<span id="cb85-16"><a href="manipulate.html#cb85-16" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 8</span></span>
<span id="cb85-17"><a href="manipulate.html#cb85-17" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electrici… Heating_Electrici… InteriorLights_Ele…</span></span>
<span id="cb85-18"><a href="manipulate.html#cb85-18" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                           &lt;dbl&gt;              &lt;dbl&gt;               &lt;dbl&gt;</span></span>
<span id="cb85-19"><a href="manipulate.html#cb85-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                  0         182286476.            9649498.</span></span>
<span id="cb85-20"><a href="manipulate.html#cb85-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                  0         177367416.            9649498.</span></span>
<span id="cb85-21"><a href="manipulate.html#cb85-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                  0         235785509             9649498.</span></span>
<span id="cb85-22"><a href="manipulate.html#cb85-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                  0         184762495.            9649498.</span></span>
<span id="cb85-23"><a href="manipulate.html#cb85-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                  0         245249657.            9649498.</span></span>
<span id="cb85-24"><a href="manipulate.html#cb85-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                  0         190670331.            9649498.</span></span>
<span id="cb85-25"><a href="manipulate.html#cb85-25" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                  0         252272477.            9649498.</span></span>
<span id="cb85-26"><a href="manipulate.html#cb85-26" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<ul>
<li><code>where()</code> is a very useful selection helper function when you want to apply a function (that returns <code>TRUE</code> or <code>FALSE</code>) to all columns and select only those columns where the function returns <code>TRUE</code>.</li>
</ul>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="manipulate.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(bldg, <span class="fu">where</span>(is.numeric))</span>
<span id="cb86-2"><a href="manipulate.html#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 9</span></span>
<span id="cb86-3"><a href="manipulate.html#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Cooling_Electrici… Heating_NaturalGa… Heating_Electrici… InteriorLights_Elec…</span></span>
<span id="cb86-4"><a href="manipulate.html#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="do">##                 &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;                &lt;dbl&gt;</span></span>
<span id="cb86-5"><a href="manipulate.html#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1                  0          13517796.         182286476.             9649498.</span></span>
<span id="cb86-6"><a href="manipulate.html#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2                  0          17717617.         177367416.             9649498.</span></span>
<span id="cb86-7"><a href="manipulate.html#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3                  0          25310615.         235785509              9649498.</span></span>
<span id="cb86-8"><a href="manipulate.html#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4                  0          20001989.         184762495.             9649498.</span></span>
<span id="cb86-9"><a href="manipulate.html#cb86-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5                  0          27925599.         245249657.             9649498.</span></span>
<span id="cb86-10"><a href="manipulate.html#cb86-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6                  0          21886933.         190670331.             9649498.</span></span>
<span id="cb86-11"><a href="manipulate.html#cb86-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7                  0          29745424.         252272477.             9649498.</span></span>
<span id="cb86-12"><a href="manipulate.html#cb86-12" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>You can also define the function to be applied within <code>where()</code></p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="manipulate.html#cb87-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-2"><a href="manipulate.html#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(</span>
<span id="cb87-3"><a href="manipulate.html#cb87-3" aria-hidden="true" tabindex="-1"></a>  bldg,</span>
<span id="cb87-4"><a href="manipulate.html#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">where</span>(</span>
<span id="cb87-5"><a href="manipulate.html#cb87-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">function</span>(x) <span class="fu">is.numeric</span>(x)</span>
<span id="cb87-6"><a href="manipulate.html#cb87-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb87-7"><a href="manipulate.html#cb87-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb87-8"><a href="manipulate.html#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 9</span></span>
<span id="cb87-9"><a href="manipulate.html#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="do">##    Cooling_Electrici… Heating_NaturalGa… Heating_Electrici… InteriorLights_Elec…</span></span>
<span id="cb87-10"><a href="manipulate.html#cb87-10" aria-hidden="true" tabindex="-1"></a><span class="do">##                 &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;                &lt;dbl&gt;</span></span>
<span id="cb87-11"><a href="manipulate.html#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  1                  0          13517796.         182286476.             9649498.</span></span>
<span id="cb87-12"><a href="manipulate.html#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  2                  0          17717617.         177367416.             9649498.</span></span>
<span id="cb87-13"><a href="manipulate.html#cb87-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  3                  0          25310615.         235785509              9649498.</span></span>
<span id="cb87-14"><a href="manipulate.html#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  4                  0          20001989.         184762495.             9649498.</span></span>
<span id="cb87-15"><a href="manipulate.html#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  5                  0          27925599.         245249657.             9649498.</span></span>
<span id="cb87-16"><a href="manipulate.html#cb87-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  6                  0          21886933.         190670331.             9649498.</span></span>
<span id="cb87-17"><a href="manipulate.html#cb87-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  7                  0          29745424.         252272477.             9649498.</span></span>
<span id="cb87-18"><a href="manipulate.html#cb87-18" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
</div>
<div id="filter" class="section level3" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> <code>filter()</code></h3>
<p>You can use <code>filter()</code> to subset rows based on their values. dplyr’s <code>filter()</code> function retains rows that return <code>TRUE</code> for all the conditions specified. The first argument is the data frame and the subsequent arguments are the conditions that are used to subset the observations. In other words, multiple arguments to <code>filter()</code> are combined by the <code>&amp;</code> (and) logical operator. To work with other logical operators such as <code>|</code> (or) and <code>!</code> (not), you would have to combine them within a single argument.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="manipulate.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(bldg, Cooling_Electricity_J <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb88-2"><a href="manipulate.html#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2,678 x 10</span></span>
<span id="cb88-3"><a href="manipulate.html#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb88-4"><a href="manipulate.html#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb88-5"><a href="manipulate.html#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-02-11 15:00:00            4354833.                  0          91807743.</span></span>
<span id="cb88-6"><a href="manipulate.html#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-02-11 16:00:00            2387624.                  0          94118327.</span></span>
<span id="cb88-7"><a href="manipulate.html#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-02-23 09:00:00            7606370.                  0         102607149.</span></span>
<span id="cb88-8"><a href="manipulate.html#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-02-23 10:00:00           21074975.                  0          76304715.</span></span>
<span id="cb88-9"><a href="manipulate.html#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-02-23 11:00:00           23052733.                  0          63182232.</span></span>
<span id="cb88-10"><a href="manipulate.html#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-02-23 12:00:00           23185185.                  0          53130886.</span></span>
<span id="cb88-11"><a href="manipulate.html#cb88-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-02-23 13:00:00           20501352.                  0          68037068.</span></span>
<span id="cb88-12"><a href="manipulate.html#cb88-12" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb88-13"><a href="manipulate.html#cb88-13" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(bldg, InteriorLights_Electricity_J <span class="sc">&gt;</span> <span class="dv">100000000</span>)</span>
<span id="cb88-14"><a href="manipulate.html#cb88-14" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2,520 x 10</span></span>
<span id="cb88-15"><a href="manipulate.html#cb88-15" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb88-16"><a href="manipulate.html#cb88-16" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb88-17"><a href="manipulate.html#cb88-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-02 09:00:00                   0         128483630.         473529413.</span></span>
<span id="cb88-18"><a href="manipulate.html#cb88-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-02 10:00:00                   0         109562756.         398893378.</span></span>
<span id="cb88-19"><a href="manipulate.html#cb88-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-02 11:00:00                   0          88363562.         350234124.</span></span>
<span id="cb88-20"><a href="manipulate.html#cb88-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-02 12:00:00                   0          75198754.         305357974 </span></span>
<span id="cb88-21"><a href="manipulate.html#cb88-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-02 13:00:00                   0          70573992.         300958898.</span></span>
<span id="cb88-22"><a href="manipulate.html#cb88-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-02 14:00:00                   0          84277786.         249050033.</span></span>
<span id="cb88-23"><a href="manipulate.html#cb88-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-02 15:00:00                   0          99713290.         238506555.</span></span>
<span id="cb88-24"><a href="manipulate.html#cb88-24" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb88-25"><a href="manipulate.html#cb88-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-26"><a href="manipulate.html#cb88-26" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(</span>
<span id="cb88-27"><a href="manipulate.html#cb88-27" aria-hidden="true" tabindex="-1"></a>  bldg, Cooling_Electricity_J <span class="sc">!=</span> <span class="dv">0</span>,</span>
<span id="cb88-28"><a href="manipulate.html#cb88-28" aria-hidden="true" tabindex="-1"></a>  Cooling_Electricity_J <span class="sc">&lt;</span> <span class="dv">4000000</span> <span class="sc">|</span></span>
<span id="cb88-29"><a href="manipulate.html#cb88-29" aria-hidden="true" tabindex="-1"></a>    Cooling_Electricity_J <span class="sc">&gt;</span> <span class="dv">22000000</span>,</span>
<span id="cb88-30"><a href="manipulate.html#cb88-30" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb88-31"><a href="manipulate.html#cb88-31" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2,428 x 10</span></span>
<span id="cb88-32"><a href="manipulate.html#cb88-32" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb88-33"><a href="manipulate.html#cb88-33" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb88-34"><a href="manipulate.html#cb88-34" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-02-11 16:00:00            2387624.                  0          94118327.</span></span>
<span id="cb88-35"><a href="manipulate.html#cb88-35" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-02-23 11:00:00           23052733.                  0          63182232.</span></span>
<span id="cb88-36"><a href="manipulate.html#cb88-36" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-02-23 12:00:00           23185185.                  0          53130886.</span></span>
<span id="cb88-37"><a href="manipulate.html#cb88-37" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-02-23 20:00:00            1387715.                  0         101207501.</span></span>
<span id="cb88-38"><a href="manipulate.html#cb88-38" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-03-10 12:00:00           25148879.                  0          17802883.</span></span>
<span id="cb88-39"><a href="manipulate.html#cb88-39" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-03-10 13:00:00           31261163.                  0          15048079.</span></span>
<span id="cb88-40"><a href="manipulate.html#cb88-40" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-03-10 14:00:00           30172661.                  0           1791300.</span></span>
<span id="cb88-41"><a href="manipulate.html#cb88-41" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>Often, the ability to subset observations based on their timestamp is a very useful feature when working with timeseries data</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="manipulate.html#cb89-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-2"><a href="manipulate.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(bldg, <span class="fu">month</span>(Date_Time) <span class="sc">==</span> <span class="dv">1</span>, <span class="fu">day</span>(Date_Time) <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb89-3"><a href="manipulate.html#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 24 x 10</span></span>
<span id="cb89-4"><a href="manipulate.html#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb89-5"><a href="manipulate.html#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb89-6"><a href="manipulate.html#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                   0          13517796.         182286476.</span></span>
<span id="cb89-7"><a href="manipulate.html#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                   0          17717617.         177367416.</span></span>
<span id="cb89-8"><a href="manipulate.html#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                   0          25310615.         235785509 </span></span>
<span id="cb89-9"><a href="manipulate.html#cb89-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                   0          20001989.         184762495.</span></span>
<span id="cb89-10"><a href="manipulate.html#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                   0          27925599.         245249657.</span></span>
<span id="cb89-11"><a href="manipulate.html#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                   0          21886933.         190670331.</span></span>
<span id="cb89-12"><a href="manipulate.html#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                   0          29745424.         252272477.</span></span>
<span id="cb89-13"><a href="manipulate.html#cb89-13" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb89-14"><a href="manipulate.html#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(bldg, <span class="fu">day</span>(Date_Time) <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb89-15"><a href="manipulate.html#cb89-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 287 x 10</span></span>
<span id="cb89-16"><a href="manipulate.html#cb89-16" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb89-17"><a href="manipulate.html#cb89-17" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb89-18"><a href="manipulate.html#cb89-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                   0          13517796.         182286476.</span></span>
<span id="cb89-19"><a href="manipulate.html#cb89-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                   0          17717617.         177367416.</span></span>
<span id="cb89-20"><a href="manipulate.html#cb89-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                   0          25310615.         235785509 </span></span>
<span id="cb89-21"><a href="manipulate.html#cb89-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                   0          20001989.         184762495.</span></span>
<span id="cb89-22"><a href="manipulate.html#cb89-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                   0          27925599.         245249657.</span></span>
<span id="cb89-23"><a href="manipulate.html#cb89-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                   0          21886933.         190670331.</span></span>
<span id="cb89-24"><a href="manipulate.html#cb89-24" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                   0          29745424.         252272477.</span></span>
<span id="cb89-25"><a href="manipulate.html#cb89-25" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb89-26"><a href="manipulate.html#cb89-26" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(bldg, <span class="fu">month</span>(Date_Time) <span class="sc">&gt;</span> <span class="dv">4</span>, <span class="fu">month</span>(Date_Time) <span class="sc">&lt;</span> <span class="dv">10</span>)</span>
<span id="cb89-27"><a href="manipulate.html#cb89-27" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3,672 x 10</span></span>
<span id="cb89-28"><a href="manipulate.html#cb89-28" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb89-29"><a href="manipulate.html#cb89-29" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb89-30"><a href="manipulate.html#cb89-30" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-05-01 00:00:00                  0                   0                 0 </span></span>
<span id="cb89-31"><a href="manipulate.html#cb89-31" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-05-01 01:00:00                  0                   0                 0 </span></span>
<span id="cb89-32"><a href="manipulate.html#cb89-32" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-05-01 02:00:00                  0                   0                 0 </span></span>
<span id="cb89-33"><a href="manipulate.html#cb89-33" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-05-01 03:00:00                  0                   0                 0 </span></span>
<span id="cb89-34"><a href="manipulate.html#cb89-34" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-05-01 04:00:00                  0                   0                 0 </span></span>
<span id="cb89-35"><a href="manipulate.html#cb89-35" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-05-01 05:00:00                  0                   0                 0 </span></span>
<span id="cb89-36"><a href="manipulate.html#cb89-36" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-05-01 06:00:00                  0                   0         252935532.</span></span>
<span id="cb89-37"><a href="manipulate.html#cb89-37" aria-hidden="true" tabindex="-1"></a>....</span>
<span id="cb89-38"><a href="manipulate.html#cb89-38" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(bldg, <span class="fu">month</span>(Date_Time) <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">&amp;</span> <span class="fu">month</span>(Date_Time) <span class="sc">&lt;</span> <span class="dv">10</span>)</span>
<span id="cb89-39"><a href="manipulate.html#cb89-39" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 3,672 x 10</span></span>
<span id="cb89-40"><a href="manipulate.html#cb89-40" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb89-41"><a href="manipulate.html#cb89-41" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb89-42"><a href="manipulate.html#cb89-42" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-05-01 00:00:00                  0                   0                 0 </span></span>
<span id="cb89-43"><a href="manipulate.html#cb89-43" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-05-01 01:00:00                  0                   0                 0 </span></span>
<span id="cb89-44"><a href="manipulate.html#cb89-44" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-05-01 02:00:00                  0                   0                 0 </span></span>
<span id="cb89-45"><a href="manipulate.html#cb89-45" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-05-01 03:00:00                  0                   0                 0 </span></span>
<span id="cb89-46"><a href="manipulate.html#cb89-46" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-05-01 04:00:00                  0                   0                 0 </span></span>
<span id="cb89-47"><a href="manipulate.html#cb89-47" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-05-01 05:00:00                  0                   0                 0 </span></span>
<span id="cb89-48"><a href="manipulate.html#cb89-48" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-05-01 06:00:00                  0                   0         252935532.</span></span>
<span id="cb89-49"><a href="manipulate.html#cb89-49" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>You can also combine <code>filter()</code> with <code>grepl()</code> to subset rows using regular expressions.</p>
</div>
<div id="arrange" class="section level3" number="8.2.3">
<h3><span class="header-section-number">8.2.3</span> <code>arrange()</code></h3>
<p>You can use <code>arrange()</code> to sort the dataset based on the values of selected columns. The first argument is the data frame and the second is the column name to sort the data frame by. If more than one column name is provided, subsequent column names will be used to break ties in the preceeding columns.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="manipulate.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(bldg, Cooling_Electricity_J)</span>
<span id="cb90-2"><a href="manipulate.html#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 10</span></span>
<span id="cb90-3"><a href="manipulate.html#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb90-4"><a href="manipulate.html#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb90-5"><a href="manipulate.html#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                   0          13517796.         182286476.</span></span>
<span id="cb90-6"><a href="manipulate.html#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                   0          17717617.         177367416.</span></span>
<span id="cb90-7"><a href="manipulate.html#cb90-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                   0          25310615.         235785509 </span></span>
<span id="cb90-8"><a href="manipulate.html#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                   0          20001989.         184762495.</span></span>
<span id="cb90-9"><a href="manipulate.html#cb90-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                   0          27925599.         245249657.</span></span>
<span id="cb90-10"><a href="manipulate.html#cb90-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                   0          21886933.         190670331.</span></span>
<span id="cb90-11"><a href="manipulate.html#cb90-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                   0          29745424.         252272477.</span></span>
<span id="cb90-12"><a href="manipulate.html#cb90-12" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>You can use <code>desc()</code> to order a column in descending order</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="manipulate.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(bldg, <span class="fu">desc</span>(Cooling_Electricity_J))</span>
<span id="cb91-2"><a href="manipulate.html#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 10</span></span>
<span id="cb91-3"><a href="manipulate.html#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb91-4"><a href="manipulate.html#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb91-5"><a href="manipulate.html#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-07-19 16:00:00          356330907.                  0                  0</span></span>
<span id="cb91-6"><a href="manipulate.html#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-07-19 15:00:00          349038364.                  0                  0</span></span>
<span id="cb91-7"><a href="manipulate.html#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-07-18 16:00:00          339376366.                  0                  0</span></span>
<span id="cb91-8"><a href="manipulate.html#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-07-19 17:00:00          338918865.                  0                  0</span></span>
<span id="cb91-9"><a href="manipulate.html#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-07-17 15:00:00          337245696.                  0                  0</span></span>
<span id="cb91-10"><a href="manipulate.html#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-07-18 14:00:00          336127683.                  0                  0</span></span>
<span id="cb91-11"><a href="manipulate.html#cb91-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-07-17 16:00:00          335013419.                  0                  0</span></span>
<span id="cb91-12"><a href="manipulate.html#cb91-12" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
</div>
<div id="mutate" class="section level3" number="8.2.4">
<h3><span class="header-section-number">8.2.4</span> <code>mutate()</code></h3>
<p>You can use <code>mutate()</code> to add new variables whose values are a function of existing variables (Note that you can also refer to newly created variables). The newly created variables will be added to the end of the dataset.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="manipulate.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(bldg,</span>
<span id="cb92-2"><a href="manipulate.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Total_Heating_J =</span> Heating_NaturalGas_J <span class="sc">+</span> Heating_Electricity_J,</span>
<span id="cb92-3"><a href="manipulate.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Cooling_Heating_kWh =</span> (Total_Heating_J <span class="sc">+</span> Cooling_Electricity_J) <span class="sc">*</span> <span class="fl">2.77778e-7</span></span>
<span id="cb92-4"><a href="manipulate.html#cb92-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb92-5"><a href="manipulate.html#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 12</span></span>
<span id="cb92-6"><a href="manipulate.html#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb92-7"><a href="manipulate.html#cb92-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb92-8"><a href="manipulate.html#cb92-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                   0          13517796.         182286476.</span></span>
<span id="cb92-9"><a href="manipulate.html#cb92-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                   0          17717617.         177367416.</span></span>
<span id="cb92-10"><a href="manipulate.html#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                   0          25310615.         235785509 </span></span>
<span id="cb92-11"><a href="manipulate.html#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                   0          20001989.         184762495.</span></span>
<span id="cb92-12"><a href="manipulate.html#cb92-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                   0          27925599.         245249657.</span></span>
<span id="cb92-13"><a href="manipulate.html#cb92-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                   0          21886933.         190670331.</span></span>
<span id="cb92-14"><a href="manipulate.html#cb92-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                   0          29745424.         252272477.</span></span>
<span id="cb92-15"><a href="manipulate.html#cb92-15" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>You can use <code>transmute()</code> if you only want to keep the new variables in your dataset.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="manipulate.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transmute</span>(bldg,</span>
<span id="cb93-2"><a href="manipulate.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Total_Heating_J =</span> Heating_NaturalGas_J <span class="sc">+</span> Heating_Electricity_J,</span>
<span id="cb93-3"><a href="manipulate.html#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Cooling_Heating_kWh =</span> (Total_Heating_J <span class="sc">+</span> Cooling_Electricity_J) <span class="sc">*</span> <span class="fl">2.77778e-7</span></span>
<span id="cb93-4"><a href="manipulate.html#cb93-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb93-5"><a href="manipulate.html#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 2</span></span>
<span id="cb93-6"><a href="manipulate.html#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    Total_Heating_J Cooling_Heating_kWh</span></span>
<span id="cb93-7"><a href="manipulate.html#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="do">##              &lt;dbl&gt;               &lt;dbl&gt;</span></span>
<span id="cb93-8"><a href="manipulate.html#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1      195804272.                54.4</span></span>
<span id="cb93-9"><a href="manipulate.html#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2      195085034.                54.2</span></span>
<span id="cb93-10"><a href="manipulate.html#cb93-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3      261096124.                72.5</span></span>
<span id="cb93-11"><a href="manipulate.html#cb93-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4      204764484.                56.9</span></span>
<span id="cb93-12"><a href="manipulate.html#cb93-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5      273175257.                75.9</span></span>
<span id="cb93-13"><a href="manipulate.html#cb93-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6      212557265.                59.0</span></span>
<span id="cb93-14"><a href="manipulate.html#cb93-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7      282017901.                78.3</span></span>
<span id="cb93-15"><a href="manipulate.html#cb93-15" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>Useful mutate functions include
- Arithmetic operators (<code>+</code>, <code>-</code>, *<code>,</code>/<code>, etc.) and logarithms (</code>log()<code>,</code>log2()<code>, etc.) -</code>lead()<code>and</code>lag()<code>, allowing you to create lead and lag variables that are useful especially when working with timeseries data. -</code>if_else()<code>and</code>case_when()`</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="manipulate.html#cb94-1" aria-hidden="true" tabindex="-1"></a>heat <span class="ot">&lt;-</span> <span class="fu">transmute</span>(bldg,</span>
<span id="cb94-2"><a href="manipulate.html#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Total_Heating_J =</span> Heating_NaturalGas_J <span class="sc">+</span> Heating_Electricity_J</span>
<span id="cb94-3"><a href="manipulate.html#cb94-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb94-4"><a href="manipulate.html#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="manipulate.html#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(</span>
<span id="cb94-6"><a href="manipulate.html#cb94-6" aria-hidden="true" tabindex="-1"></a>  heat,</span>
<span id="cb94-7"><a href="manipulate.html#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">lag_1 =</span> <span class="fu">lag</span>(Total_Heating_J),</span>
<span id="cb94-8"><a href="manipulate.html#cb94-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">lag_2 =</span> <span class="fu">lag</span>(lag_1),</span>
<span id="cb94-9"><a href="manipulate.html#cb94-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">lag_3 =</span> <span class="fu">lag</span>(Total_Heating_J, <span class="dv">3</span>)</span>
<span id="cb94-10"><a href="manipulate.html#cb94-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb94-11"><a href="manipulate.html#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 4</span></span>
<span id="cb94-12"><a href="manipulate.html#cb94-12" aria-hidden="true" tabindex="-1"></a><span class="do">##    Total_Heating_J      lag_1      lag_2      lag_3</span></span>
<span id="cb94-13"><a href="manipulate.html#cb94-13" aria-hidden="true" tabindex="-1"></a><span class="do">##              &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span id="cb94-14"><a href="manipulate.html#cb94-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  1      195804272.        NA         NA         NA </span></span>
<span id="cb94-15"><a href="manipulate.html#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  2      195085034. 195804272.        NA         NA </span></span>
<span id="cb94-16"><a href="manipulate.html#cb94-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  3      261096124. 195085034. 195804272.        NA </span></span>
<span id="cb94-17"><a href="manipulate.html#cb94-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  4      204764484. 261096124. 195085034. 195804272.</span></span>
<span id="cb94-18"><a href="manipulate.html#cb94-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  5      273175257. 204764484. 261096124. 195085034.</span></span>
<span id="cb94-19"><a href="manipulate.html#cb94-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  6      212557265. 273175257. 204764484. 261096124.</span></span>
<span id="cb94-20"><a href="manipulate.html#cb94-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  7      282017901. 212557265. 273175257. 204764484.</span></span>
<span id="cb94-21"><a href="manipulate.html#cb94-21" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>TODO: Example of use of <code>if_else()</code> and <code>case_when()</code> in <code>mutate()</code> pipe</p>
</div>
<div id="summarise-and-group_by" class="section level3" number="8.2.5">
<h3><span class="header-section-number">8.2.5</span> <code>summarise()</code> and <code>group_by()</code></h3>
<p><code>summarise()</code> or <code>summarize()</code> collapse a data frame into one row for each combination of grouping variables. Therefore, it is not very useful by itself.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="manipulate.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(bldg,</span>
<span id="cb95-2"><a href="manipulate.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Heating_Total =</span> <span class="fu">sum</span>(Heating_Electricity_J),</span>
<span id="cb95-3"><a href="manipulate.html#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Heating_Avg =</span> <span class="fu">mean</span>(Heating_Electricity_J),</span>
<span id="cb95-4"><a href="manipulate.html#cb95-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Heating_Peak =</span> <span class="fu">max</span>(Heating_Electricity_J)</span>
<span id="cb95-5"><a href="manipulate.html#cb95-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-6"><a href="manipulate.html#cb95-6" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 1 x 3</span></span>
<span id="cb95-7"><a href="manipulate.html#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="do">##   Heating_Total Heating_Avg Heating_Peak</span></span>
<span id="cb95-8"><a href="manipulate.html#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="do">##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb95-9"><a href="manipulate.html#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 508713824519.   58072354.   1002989103</span></span></code></pre></div>
<p>However, <code>summarise()</code> combined with <code>group_by()</code> will allow you to easily summarise data based on individual groups.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="manipulate.html#cb96-1" aria-hidden="true" tabindex="-1"></a>bldg_month <span class="ot">&lt;-</span> <span class="fu">mutate</span>(bldg,</span>
<span id="cb96-2"><a href="manipulate.html#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Year =</span> <span class="fu">year</span>(Date_Time),</span>
<span id="cb96-3"><a href="manipulate.html#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Month =</span> <span class="fu">month</span>(Date_Time)</span>
<span id="cb96-4"><a href="manipulate.html#cb96-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-5"><a href="manipulate.html#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="manipulate.html#cb96-6" aria-hidden="true" tabindex="-1"></a>bldg_by_month <span class="ot">&lt;-</span> <span class="fu">group_by</span>(bldg_month, Year, Month)</span>
<span id="cb96-7"><a href="manipulate.html#cb96-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-8"><a href="manipulate.html#cb96-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(bldg_by_month,</span>
<span id="cb96-9"><a href="manipulate.html#cb96-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Heating_Total =</span> <span class="fu">sum</span>(Heating_Electricity_J),</span>
<span id="cb96-10"><a href="manipulate.html#cb96-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Heating_Avg =</span> <span class="fu">mean</span>(Heating_Electricity_J),</span>
<span id="cb96-11"><a href="manipulate.html#cb96-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Heating_Peak =</span> <span class="fu">max</span>(Heating_Electricity_J)</span>
<span id="cb96-12"><a href="manipulate.html#cb96-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-13"><a href="manipulate.html#cb96-13" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;Year&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb96-14"><a href="manipulate.html#cb96-14" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 13 x 5</span></span>
<span id="cb96-15"><a href="manipulate.html#cb96-15" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   Year [2]</span></span>
<span id="cb96-16"><a href="manipulate.html#cb96-16" aria-hidden="true" tabindex="-1"></a><span class="do">##     Year Month Heating_Total Heating_Avg Heating_Peak</span></span>
<span id="cb96-17"><a href="manipulate.html#cb96-17" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;</span></span>
<span id="cb96-18"><a href="manipulate.html#cb96-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  1  2020     1 124527837066.  167601396.   978585992.</span></span>
<span id="cb96-19"><a href="manipulate.html#cb96-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  2  2020     2  89836688374.  133486907.  1002989103 </span></span>
<span id="cb96-20"><a href="manipulate.html#cb96-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  3  2020     3  55674915533.   74932592.   795581602.</span></span>
<span id="cb96-21"><a href="manipulate.html#cb96-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  4  2020     4  32036849861.   44495625.   639342141.</span></span>
<span id="cb96-22"><a href="manipulate.html#cb96-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  5  2020     5   7726081874.   10384519.   252935532.</span></span>
<span id="cb96-23"><a href="manipulate.html#cb96-23" aria-hidden="true" tabindex="-1"></a><span class="do">##  6  2020     6    624415414.     867244.    39920827.</span></span>
<span id="cb96-24"><a href="manipulate.html#cb96-24" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
</div>
<div id="across" class="section level3" number="8.2.6">
<h3><span class="header-section-number">8.2.6</span> <code>across()</code></h3>
<p><code>across()</code> makes it possible to apply functions across multiple columns within the functions <code>summarise()</code> and <code>mutate()</code>, using the semantics in <code>filter()</code> (see section <a href="manipulate.html#select">8.2.1</a>) that makes it easy to refer to columns based on their names.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="manipulate.html#cb97-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-2"><a href="manipulate.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(bldg,</span>
<span id="cb97-3"><a href="manipulate.html#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">total =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))</span>
<span id="cb97-4"><a href="manipulate.html#cb97-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb97-5"><a href="manipulate.html#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8,760 x 11</span></span>
<span id="cb97-6"><a href="manipulate.html#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="do">##    Date_Time           Cooling_Electricit… Heating_NaturalGa… Heating_Electrici…</span></span>
<span id="cb97-7"><a href="manipulate.html#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dttm&gt;                            &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;</span></span>
<span id="cb97-8"><a href="manipulate.html#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 2020-01-01 01:00:00                   0          13517796.         182286476.</span></span>
<span id="cb97-9"><a href="manipulate.html#cb97-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 2020-01-01 02:00:00                   0          17717617.         177367416.</span></span>
<span id="cb97-10"><a href="manipulate.html#cb97-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 2020-01-01 03:00:00                   0          25310615.         235785509 </span></span>
<span id="cb97-11"><a href="manipulate.html#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 2020-01-01 04:00:00                   0          20001989.         184762495.</span></span>
<span id="cb97-12"><a href="manipulate.html#cb97-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 2020-01-01 05:00:00                   0          27925599.         245249657.</span></span>
<span id="cb97-13"><a href="manipulate.html#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 2020-01-01 06:00:00                   0          21886933.         190670331.</span></span>
<span id="cb97-14"><a href="manipulate.html#cb97-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 2020-01-01 07:00:00                   0          29745424.         252272477.</span></span>
<span id="cb97-15"><a href="manipulate.html#cb97-15" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
<p>You may also pass a list of functions to be applied to each of the selected columns.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="manipulate.html#cb98-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-2"><a href="manipulate.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb98-3"><a href="manipulate.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  bldg_by_month,</span>
<span id="cb98-4"><a href="manipulate.html#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">across</span>(</span>
<span id="cb98-5"><a href="manipulate.html#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">contains</span>(<span class="st">&quot;electricity&quot;</span>),</span>
<span id="cb98-6"><a href="manipulate.html#cb98-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">Total =</span> sum, <span class="at">Avg =</span> mean, <span class="at">Peak =</span> max)</span>
<span id="cb98-7"><a href="manipulate.html#cb98-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb98-8"><a href="manipulate.html#cb98-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb98-9"><a href="manipulate.html#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="do">## `summarise()` has grouped output by &#39;Year&#39;. You can override using the `.groups` argument.</span></span>
<span id="cb98-10"><a href="manipulate.html#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 13 x 23</span></span>
<span id="cb98-11"><a href="manipulate.html#cb98-11" aria-hidden="true" tabindex="-1"></a><span class="do">## # Groups:   Year [2]</span></span>
<span id="cb98-12"><a href="manipulate.html#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="do">##     Year Month Cooling_Electricity_J… Cooling_Electricity… Cooling_Electricity_…</span></span>
<span id="cb98-13"><a href="manipulate.html#cb98-13" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dbl&gt; &lt;dbl&gt;                  &lt;dbl&gt;                &lt;dbl&gt;                 &lt;dbl&gt;</span></span>
<span id="cb98-14"><a href="manipulate.html#cb98-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  1  2020     1                     0                    0                     0 </span></span>
<span id="cb98-15"><a href="manipulate.html#cb98-15" aria-hidden="true" tabindex="-1"></a><span class="do">##  2  2020     2             181014017.              268966.             23185185.</span></span>
<span id="cb98-16"><a href="manipulate.html#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  3  2020     3             775169988.             1043297.             79053134.</span></span>
<span id="cb98-17"><a href="manipulate.html#cb98-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  4  2020     4           11551697867.            16044025.            226399417.</span></span>
<span id="cb98-18"><a href="manipulate.html#cb98-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  5  2020     5           22952133253.            30849641.            191404162.</span></span>
<span id="cb98-19"><a href="manipulate.html#cb98-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  6  2020     6           53405646191.            74174509.            302585966 </span></span>
<span id="cb98-20"><a href="manipulate.html#cb98-20" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>
</div>
</div>
<div id="pipes" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Pipes</h2>
<p>The <code>%&gt;%</code> is a forward pipe operator from the <code>magrittr</code> package that comes loaded with the <code>tidyverse</code> package. The pipe operator <code>%&gt;%</code> is a very handy that allows operations to be performed sequentially. In general, you can think of it as sending the output of one function as an input to the next .</p>
<p>With the pipe operator,</p>
<p>Instead of many intermediary steps</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="manipulate.html#cb99-1" aria-hidden="true" tabindex="-1"></a>first_output <span class="ot">&lt;-</span> <span class="fu">first</span>(data)</span>
<span id="cb99-2"><a href="manipulate.html#cb99-2" aria-hidden="true" tabindex="-1"></a>second_output <span class="ot">&lt;-</span> <span class="fu">second</span>(first_output)</span>
<span id="cb99-3"><a href="manipulate.html#cb99-3" aria-hidden="true" tabindex="-1"></a>final_result <span class="ot">&lt;-</span> <span class="fu">third</span>(second_output)</span></code></pre></div>
<p>You can connect multiple operators sequentially using the pipe operator</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="manipulate.html#cb100-1" aria-hidden="true" tabindex="-1"></a>final_result <span class="ot">&lt;-</span> <span class="fu">first</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="manipulate.html#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">second</span>() <span class="sc">%&gt;%</span></span>
<span id="cb100-3"><a href="manipulate.html#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">third</span>()</span></code></pre></div>
<p>Figure <a href="manipulate.html#fig:pipe">8.1</a> shows what is happening graphically.</p>
<div class="figure" style="text-align: center"><span id="fig:pipe"></span>
<img src="figures/pipe.png" alt="Piping data from one function to the next sequentially" width="70%" />
<p class="caption">
Figure 8.1: Piping data from one function to the next sequentially
</p>
</div>
<p>An example using the <code>bldg</code> dataset.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="manipulate.html#cb101-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-2"><a href="manipulate.html#cb101-2" aria-hidden="true" tabindex="-1"></a>bldg <span class="sc">%&gt;%</span></span>
<span id="cb101-3"><a href="manipulate.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Date_Time, <span class="fu">contains</span>(<span class="st">&quot;Heating&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb101-4"><a href="manipulate.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb101-5"><a href="manipulate.html#cb101-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Month =</span> <span class="fu">month</span>(Date_Time),</span>
<span id="cb101-6"><a href="manipulate.html#cb101-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Total_Heating_J =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric)))</span>
<span id="cb101-7"><a href="manipulate.html#cb101-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb101-8"><a href="manipulate.html#cb101-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Month) <span class="sc">%&gt;%</span></span>
<span id="cb101-9"><a href="manipulate.html#cb101-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb101-10"><a href="manipulate.html#cb101-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">where</span>(is.numeric),</span>
<span id="cb101-11"><a href="manipulate.html#cb101-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">Total =</span> sum, <span class="at">Peak =</span> max)</span>
<span id="cb101-12"><a href="manipulate.html#cb101-12" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb101-13"><a href="manipulate.html#cb101-13" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 12 x 7</span></span>
<span id="cb101-14"><a href="manipulate.html#cb101-14" aria-hidden="true" tabindex="-1"></a><span class="do">##    Month Heating_NaturalG… Heating_NaturalG… Heating_Electric… Heating_Electric…</span></span>
<span id="cb101-15"><a href="manipulate.html#cb101-15" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="cb101-16"><a href="manipulate.html#cb101-16" aria-hidden="true" tabindex="-1"></a><span class="do">##  1     1      59660445562.        527825997.     124648935250.        978585992.</span></span>
<span id="cb101-17"><a href="manipulate.html#cb101-17" aria-hidden="true" tabindex="-1"></a><span class="do">##  2     2      41029360544.        530570172.      89836688374.       1002989103 </span></span>
<span id="cb101-18"><a href="manipulate.html#cb101-18" aria-hidden="true" tabindex="-1"></a><span class="do">##  3     3       9377325423.        230991815.      55674915533.        795581602.</span></span>
<span id="cb101-19"><a href="manipulate.html#cb101-19" aria-hidden="true" tabindex="-1"></a><span class="do">##  4     4       3352997015.        156525821       32036849861.        639342141.</span></span>
<span id="cb101-20"><a href="manipulate.html#cb101-20" aria-hidden="true" tabindex="-1"></a><span class="do">##  5     5          2144014.          2144014.       7726081874.        252935532.</span></span>
<span id="cb101-21"><a href="manipulate.html#cb101-21" aria-hidden="true" tabindex="-1"></a><span class="do">##  6     6                0                 0         624415414.         39920827.</span></span>
<span id="cb101-22"><a href="manipulate.html#cb101-22" aria-hidden="true" tabindex="-1"></a><span class="do">##  7     7                0                 0         128302310.         16757642 </span></span>
<span id="cb101-23"><a href="manipulate.html#cb101-23" aria-hidden="true" tabindex="-1"></a>....</span></code></pre></div>

</div>
</div>



<h3> Containers</h3>
<div id="refs" class="references csl-bib-body">
<div id="ref-deru_us_2011" class="csl-entry">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">M. Deru, K. Field, D. Studer, K. Benne, B. Griffith, P. Torcellini, B. Liu, M. Halverson, D. Winiarski, M. Rosenberg, <span>US</span> <span>Department</span> of <span>Energy</span> commercial reference building models of the national building stock, (2011).</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="get-started.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r4bes.pdf", "r4bes.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
